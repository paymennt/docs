"use strict";(self.webpackChunkpmnnt_docs=self.webpackChunkpmnnt_docs||[]).push([[92],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,k=d["".concat(s,".").concat(u)]||d[u]||m[u]||i;return n?a.createElement(k,o(o({ref:t},c),{},{components:n})):a.createElement(k,o({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},989:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294),r=n(4996);const i=function(e){let t,{children:n,title:i,image:o,link:l,action:s}=e;return o&&(t=a.createElement("img",{src:(0,r.Z)(o),alt:"Image alt text",title:"Logo Title Text 1"})),a.createElement("div",{className:"card"},a.createElement("div",{className:"card__header"},i&&a.createElement("h3",null,i),n&&a.createElement("p",null,n)),a.createElement("div",{className:"card__image"},t),a.createElement("div",{className:"card__footer"},a.createElement("a",{className:"button button--secondary button--block",href:(0,r.Z)(l)},s)))}},2433:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905)),i=n(989);const o={title:"in-app payments",sidebar_label:"mobile apps",hide_title:!1,hide_table_of_contents:!1},l=void 0,s={unversionedId:"payment/mobile/index",id:"payment/mobile/index",title:"in-app payments",description:"On this page we describe the steps required to initiate and verify a payment via the paymennt payment gateway for mobile based applications using the paymennt mobile SDKs.",source:"@site/docs/1-payment/5-mobile/index.md",sourceDirName:"1-payment/5-mobile",slug:"/payment/mobile/",permalink:"/docs/payment/mobile/",draft:!1,tags:[],version:"current",frontMatter:{title:"in-app payments",sidebar_label:"mobile apps",hide_title:!1,hide_table_of_contents:!1},sidebar:"docs",previous:{title:"qr codes",permalink:"/docs/payment/qr/"},next:{title:"e-commerce",permalink:"/docs/payment/ecomm/"}},p={},c=[{value:"how it works",id:"how-it-works",level:2},{value:"step 1: create a new checkout",id:"step-1-create-a-new-checkout",level:2},{value:"step 2: initiate the PointCheckoutClient",id:"step-2-initiate-the-pointcheckoutclient",level:2},{value:"step 3: verify payment status",id:"step-3-verify-payment-status",level:2},{value:"checkout status values",id:"checkout-status-values",level:3},{value:"step 4: test the integration",id:"step-4-test-the-integration",level:2}],d={toc:c},m="wrapper";function u(e){let{components:t,...o}=e;return(0,r.kt)(m,(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"On this page we describe the steps required to initiate and verify a payment via the ",(0,r.kt)("strong",{parentName:"p"},"paymennt")," payment gateway for mobile based applications using the ",(0,r.kt)("strong",{parentName:"p"},"paymennt")," mobile SDKs."),(0,r.kt)("h2",{id:"how-it-works"},"how it works"),(0,r.kt)("p",null,"Three steps are required to accept payments via the ",(0,r.kt)("strong",{parentName:"p"},"paymennt")," payment gateway for mobile-based applications using the ",(0,r.kt)("strong",{parentName:"p"},"paymennt")," SDKs:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a new Mobile Checkout"),(0,r.kt)("li",{parentName:"ol"},"Initiate the ",(0,r.kt)("inlineCode",{parentName:"li"},"PointCheckoutClient")," using the ",(0,r.kt)("inlineCode",{parentName:"li"},"checkoutKey")," received in the response"),(0,r.kt)("li",{parentName:"ol"},"On callback, query the API for the payment status")),(0,r.kt)("p",null,"The diagram below shows the overall flow to be used in order to accept payments using the ",(0,r.kt)("strong",{parentName:"p"},"paymennt"),"\nweb integration"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Website integration flow",src:n(1435).Z,width:"1760",height:"1100"})),(0,r.kt)("h2",{id:"step-1-create-a-new-checkout"},"step 1: create a new checkout"),(0,r.kt)("admonition",{title:"SERVER API CALL",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"API calls made to the ",(0,r.kt)("strong",{parentName:"p"},"paymennt")," API endpoints should be made from your server. You should NEVER include your API keys in your mobile application. A mallicious user can gain access to your account if those keys are exposed.")),(0,r.kt)("p",null,"When the customer is ready to pay, create a new mobile checkout by making a call from your server to ",(0,r.kt)("a",{href:"/api/#operation/create_checkout_mobile",target:"_blank"},(0,r.kt)("inlineCode",{parentName:"p"},"POST /checkout/mobile")),". In your request, you must include the following required parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Parameter")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"requestId")),(0,r.kt)("td",{parentName:"tr",align:null},"A unique Identifier for this request, can be used later to query the status on the checkout")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"orderId")),(0,r.kt)("td",{parentName:"tr",align:null},"This can be the order ID. Must match any reference shown to the user during checkout / order history")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"currency")),(0,r.kt)("td",{parentName:"tr",align:null},"ISO 4217 Currency Code (3 letter currency code)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"amount")),(0,r.kt)("td",{parentName:"tr",align:null},"A postive decimal number representing the amount customer should pay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"customer")),(0,r.kt)("td",{parentName:"tr",align:null},"The details of the customer making teh payment")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"billingAddress")),(0,r.kt)("td",{parentName:"tr",align:null},"The customer billing address")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"deliveryAddress")),(0,r.kt)("td",{parentName:"tr",align:null},"The address where the service will be delivered")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"items")),(0,r.kt)("td",{parentName:"tr",align:null},"An array of the items associated with this order")))),(0,r.kt)("p",null,"Here's an example of how you would create a new checkout for ",(0,r.kt)("strong",{parentName:"p"},"100.00 AED"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="curl"',title:'"curl"'},'curl -L -X POST "https://api.test.paymennt.com/mer/v2.0/checkout/mobile" \\\n-H "X-POINTCHECKOUT-KEY: YOUR_X-POINTCHECKOUT-KEY" \\\n-H "X-POINTCHECKOUT-SECRET: YOUR_X-POINTCHECKOUT-SECRET" \\\n-H "content-type: application/json" \\\n-d \'{\n  "requestID": "EXAMPLE-123.1",\n  "orderID": "EXAMPLE-123",\n  "currency": "AED",\n  "amount": 100.00,\n  "customer": {...},\n  "billingAddress": {...},\n  "deliveryAddress": {...},\n  "items": [...]\n}\'\n')),(0,r.kt)("admonition",{title:"Failed or cancelled orders",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If a payment fails or customer cancels the the payment, you cannot reuse the same ",(0,r.kt)("inlineCode",{parentName:"p"},"requestId"),". You can however use the same ",(0,r.kt)("inlineCode",{parentName:"p"},"orderId")," to create a new checkout.")),(0,r.kt)("h2",{id:"step-2-initiate-the-pointcheckoutclient"},"step 2: initiate the PointCheckoutClient"),(0,r.kt)("p",null,"The response from ",(0,r.kt)("strong",{parentName:"p"},"Step 1")," above will result in a new checkout being succesffully created for your merchant account. Once received, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutKey")," to initiate the client"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="200 Response"',title:'"200','Response"':!0},'{\n  "success": true,\n  "elapsed": 12,\n  "result": {\n    "id": "1653241101733169556",\n    "requestId": "EXAMPLE-123.1",\n    "orderId": "EXAMPLE-123",\n    "currency": "AED",\n    "amount": 100.00,\n    "status": "PENDING",\n    "checkoutKey": "90ed4298f15d46df994fd1cfbbec5aa24390e811295cf8b5",\n    ...\n  }\n}\n')),(0,r.kt)("p",null,"To learn more about the specific mechanism to use our SDKs, you can view the instructions for each of the SDK platforms below:"),(0,r.kt)("div",{class:"row"},(0,r.kt)("div",{class:"col col--3"},(0,r.kt)(i.Z,{image:"/img/docs/integrate/sdks/android-logo.svg",link:"/docs/sdks/android",action:"Android",mdxType:"Card"},"Android")),(0,r.kt)("div",{class:"col col--3"},(0,r.kt)(i.Z,{image:"/img/docs/integrate/sdks/ios-logo.svg",link:"/docs/sdks/ios",action:"iOS",mdxType:"Card"},"iOS"))),(0,r.kt)("h2",{id:"step-3-verify-payment-status"},"step 3: verify payment status"),(0,r.kt)("p",null,"Once the payment process has completed (regardless of status), the SDK will excute the callback function passed to the SDK during the client initialization in ",(0,r.kt)("strong",{parentName:"p"},"Step 2"),"."),(0,r.kt)("p",null,"To verify the payment status, make an API call from your server to ",(0,r.kt)("a",{href:"/api/#operation/get_checkout",target:"_blank"},(0,r.kt)("inlineCode",{parentName:"p"},"GET /checkout/{checkoutId}")),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutId")," is the ID received in the server response in ",(0,r.kt)("strong",{parentName:"p"},"Step 1")),(0,r.kt)("p",null,"Here's an example of how you can query the status of checkout with id ",(0,r.kt)("inlineCode",{parentName:"p"},"1653241101733169556"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="curl"',title:'"curl"'},'curl -L -X GET "https://api.test.paymennt.com/mer/v2.0/checkout/1653241101733169556" \\\n-H "X-POINTCHECKOUT-KEY: YOUR_X-POINTCHECKOUT-KEY" \\\n-H "X-POINTCHECKOUT-SECRET: YOUR_X-POINTCHECKOUT-SECRET" \\\n-H \'Content-Type: application/json\'\n')),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"CONFIRMING CHECKOUT IS ",(0,r.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"PAID")),(0,r.kt)("p",{parentName:"admonition"},"A paid checkout will have the status of ",(0,r.kt)("inlineCode",{parentName:"p"},"PAID"),". If the checkout has a status other than paid, you should either display and error or take the user back to the checkout flow.")),(0,r.kt)("h3",{id:"checkout-status-values"},"checkout status values"),(0,r.kt)("p",null,"Below is a list of available status codes that may be provided via the ",(0,r.kt)("strong",{parentName:"p"},"paymennt")," API to describe the status of a checkout:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"STATUS"),(0,r.kt)("th",{parentName:"tr",align:"left"},"DETAILS"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"PENDING"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"New Checkout. User has not completed the payment.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"AUTHORIZED"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"The payment has been authorized. A subsequent ",(0,r.kt)("inlineCode",{parentName:"td"},"CAPTURE")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"CANCEL")," API call is expected before expiry.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"PAID"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"This status is effective when a customer has successfully completed the payment associated with this checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"FAILED"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Payment failed due to payment failure. ",(0,r.kt)("strong",{parentName:"td"},"paymennt")," failed to recover such a checkout process.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"CANCELLED"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"User cancelled the checkout process and returned to the merchant page.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"EXPIRED"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Checkout has expired without being processed")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"REFUNDED"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Checkout has been fully refunded to customer")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"PARTIALLY_REFUNDED"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Checkout have been partially refunded to customer")))),(0,r.kt)("h2",{id:"step-4-test-the-integration"},"step 4: test the integration"),(0,r.kt)("p",null,"Once your integration is ready, you can use the below test card details to verify your integration"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Number: ",(0,r.kt)("inlineCode",{parentName:"li"},"4242 4242 4242 4242")),(0,r.kt)("li",{parentName:"ul"},"Expiry date: ",(0,r.kt)("inlineCode",{parentName:"li"},"12/25")),(0,r.kt)("li",{parentName:"ul"},"CVV: ",(0,r.kt)("inlineCode",{parentName:"li"},"100")),(0,r.kt)("li",{parentName:"ul"},"Name: ",(0,r.kt)("inlineCode",{parentName:"li"},"TEST USER"))),(0,r.kt)("admonition",{title:"GO LIVE REQUIREMENTS",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Before receiving your live API Key and Secret, make sure your web application is compliant with our website requirements. To learn more, view the ",(0,r.kt)("a",{parentName:"p",href:"/docs/golive/checklist"},"Website go-live checklist"),".")))}u.isMDXComponent=!0},1435:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/sdk-flow-c0b29523b0c1176499edfc278f2706ad.png"}}]);